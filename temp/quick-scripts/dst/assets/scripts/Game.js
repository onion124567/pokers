
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/Game.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '4e12fLSQu1L+KV6QmxDiavU', 'Game');
// scripts/Game.js

"use strict";

var PokerUtil = require("PokerUtil");

var AIHelper = require("AIHelper");

cc.Class({
  "extends": cc.Component,
  properties: {
    // 这个属性引用了星星预制资源
    starPrefab: {
      "default": null,
      type: cc.Prefab
    },
    cardPrefab: {
      "default": null,
      type: cc.Prefab
    },
    // 星星产生后消失时间的随机范围
    maxStarDuration: 0,
    minStarDuration: 0,
    currentCardPosition: 0,
    startCardPostion: 0,
    cardWidth: 80,
    logicHelper: null,
    cardArray: [cc.String],
    //初始牌数组 逆时针 主角是第一个数组
    pokerPlayer: [],
    //当前轮次出牌节点,
    roundPoker: [],
    //主角当前牌节点
    playerControlNodeArray: [],
    //洗牌
    refreshButton: {
      "default": null,
      type: cc.Button
    },
    //出牌
    sendButton: {
      "default": null,
      type: cc.Button
    },
    //当前胜方
    currentWinner: 1,
    //本轮主
    gameHost: "1",
    //玩家拥有牌
    layoutContainer: {
      "default": null,
      type: cc.Layout
    },
    //玩家出的牌 
    layoutBottom: {
      "default": null,
      type: cc.Layout
    },
    //对家出牌 第三位
    layoutTop: {
      "default": null,
      type: cc.Layout
    },
    //下家出牌 左手第二位
    layoutLeft: {
      "default": null,
      type: cc.Layout
    },
    //上家出牌，右手第四位
    layoutRight: {
      "default": null,
      type: cc.Layout
    },
    //战报
    logLabel: {
      "default": null,
      type: cc.Label
    },
    playLog: "游戏开始",
    // 地面节点，用于确定星星生成的高度
    ground: {
      "default": null,
      type: cc.Node
    },
    // player 节点，用于获取主角弹跳的高度，和控制主角行动开关
    player: {
      "default": null,
      type: cc.Node
    },
    // score label 的引用
    scoreDisplay: {
      "default": null,
      type: cc.Label
    },
    // 得分音效资源
    scoreAudio: {
      "default": null,
      type: cc.AudioClip
    }
  },
  onLoad: function onLoad() {
    // 获取地平面的 y 轴坐标
    this.groundY = this.ground.y + this.ground.height / 2; // 初始化计时器

    this.timer = 0;
    this.starDuration = 0;
    this.logicHelper = new AIHelper(); //创建图片资源

    for (var i = 0; i < 13; i++) {
      var pre = 3 + i;

      for (var j = 1; j < 5; j++) {
        var str = "";

        if (pre < 10) {
          str = "0";
        }

        str = str + pre + j;
        this.cardArray.push(str);
        this.cardArray.push(str);
      }
    }

    this.cardArray.push("161");
    this.cardArray.push("161");
    this.cardArray.push("171");
    this.cardArray.push("171");
    this.refreshButton.node.on('click', this.refreshCallback, this);
    this.sendButton.node.on('click', this.sendCallback, this);
    this.publishPokers(); // this.spawnNewStar();
    // 初始化计分

    this.score = 0;
  },
  refreshCallback: function refreshCallback(button) {
    this.publishPokers();
  },
  sendCallback: function sendCallback(button) {
    var sendArray = [];
    PokerUtil.destoryArray(this.roundPoker);

    for (var i = 0; i < this.playerControlNodeArray.length;) {
      //判断是否可出
      var node = this.playerControlNodeArray[i].getComponent('Card');

      if (node.isCheck) {
        sendArray.push(node.picNum);
        this.saveRoundPoker(node.picNum, 1, i * this.cardWidth);
        this.playerControlNodeArray[i].destroy();
        this.playerControlNodeArray.splice(i, 1);
      } else {
        i++;
      } // this.playerControlNodeArray[i].destroy();

    }

    console.log("onion", "helper" + this.logicHelper);
    var secondCardArray = this.logicHelper.sendAIFollowCard(this.gameHost, 1, sendArray, this.pokerPlayer[1]); //  PokerUtil.testLogic(testArray);

    sendArray.push(secondCardArray);
    this.saveRoundPoker(secondCardArray, 2, 0);
    var thridCardArray = this.logicHelper.sendAIFollowCard(this.gameHost, 2, sendArray, this.pokerPlayer[2]);
    sendArray.push(thridCardArray);
    this.saveRoundPoker(thridCardArray, 3, 0);
    this.appendLog("我出" + sendArray + "下家出" + secondCardArray + "对家出" + thridCardArray);
  },
  //保存出牌  1 2 3 4 顺时针位
  saveRoundPoker: function saveRoundPoker(picNum, index, offset) {
    var newStar = cc.instantiate(this.cardPrefab); // newStar.setPicNum("i"+i);

    newStar.getComponent('Card').picNum = picNum;
    newStar.scaleX = 0.5;
    newStar.scaleY = 0.5;
    this.roundPoker.push(newStar); // this.node.addChild(newStar);
    // let height = this.ground.height / 2 * -1;

    switch (index) {
      case 1:
        this.layoutBottom.node.addChild(newStar);
        this.logicHelper.removePokerFromArray(this.gameHost, picNum, this.pokerPlayer[0]);
        break;

      case 2:
        this.layoutLeft.node.addChild(newStar);
        this.logicHelper.removePokerFromArray(this.gameHost, picNum, this.pokerPlayer[1]);
        break;

      case 3:
        this.layoutTop.node.addChild(newStar);
        this.logicHelper.removePokerFromArray(this.gameHost, picNum, this.pokerPlayer[2]);
        break;
    } // newStar.setPosition(cc.v2(-150 + this.startCardPostion + offset, height));

  },
  spawnNewStar: function spawnNewStar() {
    // 使用给定的模板在场景中生成一个新节点
    var newStar = cc.instantiate(this.starPrefab); // 将新增的节点添加到 Canvas 节点下面

    this.node.addChild(newStar); // 为星星设置一个随机位置

    newStar.setPosition(this.getNewStarPosition()); // 在星星组件上暂存 Game 对象的引用

    newStar.getComponent('Star').game = this; // 重置计时器，根据消失时间范围随机取一个值

    this.starDuration = this.minStarDuration + Math.random() * (this.maxStarDuration - this.minStarDuration);
    this.timer = 0;
  },

  /**
   * 移除旧的节点
   * 添加新节点
   */
  spawnBottomCard: function spawnBottomCard() {
    if (this.playerControlNodeArray.length > 0) {
      var destoryNode = this.playerControlNodeArray;
      PokerUtil.destoryArray(destoryNode);
      this.playerControlNodeArray = [];
    }

    this.createBottomCard();
  },

  /**
   * type1Array:type1Array,
          type2Array:type2Array,
          type3Array:type3Array,
          type4Array:type4Array,
          hostArray:hostArray,
          total:total
   */
  createBottomCard: function createBottomCard() {
    var startPosition = 0;
    var userObj = this.pokerPlayer[0];

    for (var i = 0; i < userObj.total.length; i++) {
      // 使用给定的模板在场景中生成一个新节点
      var newStar = cc.instantiate(this.cardPrefab); // newStar.setPicNum("i"+i);

      newStar.getComponent('Card').picNum = userObj.total[i];
      this.playerControlNodeArray.push(newStar); // this.node.addChild(newStar);

      this.layoutContainer.node.addChild(newStar);
      var height = this.ground.height / 2 * -1;
      startPosition = i * this.cardWidth;

      if (i > 13) {
        height = height - 150;
        startPosition = (i - 13) * this.cardWidth;
      } // newStar.setPosition(cc.v2(-200 + this.startCardPostion + startPosition, height));

    }
  },
  getNewStarPosition: function getNewStarPosition() {
    var randX = 0; // 根据地平面位置和主角跳跃高度，随机得到一个星星的 y 坐标

    var randY = this.groundY + Math.random() * this.player.getComponent('Player').jumpHeight + 50; // 根据屏幕宽度，随机得到一个星星 x 坐标

    var maxX = this.node.width / 2;
    randX = (Math.random() - 0.5) * 2 * maxX; // 返回星星坐标

    return cc.v2(randX, randY);
  },
  getCardBottomPosition: function getCardBottomPosition() {
    var randX = this.currentCardPosition;
    var randY = 0;
    this.currentCardPosition = this.currentCardPosition + this.cardWidth;
    return cc.v2(randX, randY);
  },
  update: function update(dt) {// 每帧更新计时器，超过限度还没有生成新的星星
    // 就会调用游戏失败逻辑
    // if (this.timer > this.starDuration) {
    //     this.gameOver();
    //     this.enabled = false;   // disable gameOver logic to avoid load scene repeatedly
    //     return;
    // }
    // this.timer += dt;
  },
  gainScore: function gainScore() {
    this.score += 1; // 更新 scoreDisplay Label 的文字

    this.scoreDisplay.string = 'Score: ' + this.score; // 播放得分音效

    cc.audioEngine.playEffect(this.scoreAudio, false);
  },
  gameOver: function gameOver() {
    this.player.stopAllActions(); //停止 player 节点的跳跃动作

    cc.director.loadScene('game');
  },

  /**
  * 把牌发给四家
  */
  publishPokers: function publishPokers() {
    this.pokerPlayer = [];
    this.gameHost = null;
    var pokerArray = this.cardArray.slice(0);
    var host = parseInt(Math.random() * 4); //随机主牌花色

    for (var i = 0; i < 4; i++) {
      var playerPokerArray = [];

      for (var j = 0; j < 27; j++) {
        var pokerNum = Math.random() * pokerArray.length;
        pokerNum = parseInt(pokerNum); //插入手牌中

        var value = pokerArray.splice(pokerNum, 1);
        playerPokerArray.push(value);

        if (this.gameHost == null) {
          //随机到主后，第一张主牌亮出
          if (host == PokerUtil.quaryPokerTypeValue(value)) {
            this.gameHost = value;
            this.appendLog("本轮游戏,主牌" + PokerUtil.quaryPokerValue(value) + "在" + this.expandPlayer(i));
          }
        }
      }

      var playerObj = PokerUtil.sortPokers(host, playerPokerArray);
      console.log("onion====", JSON.stringify(playerObj));
      this.pokerPlayer.push(playerObj);
    }

    this.spawnBottomCard();
  },
  expandPlayer: function expandPlayer(location) {
    switch (location) {
      case 0:
        return "自己";

      case 1:
        return "下家";

      case 2:
        return "对家";

      case 3:
        return "上家";
    }
  },
  appendLog: function appendLog(string) {
    this.playLog = this.playLog + "\n" + string;
    this.logLabel.string = this.playLog;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcR2FtZS5qcyJdLCJuYW1lcyI6WyJQb2tlclV0aWwiLCJyZXF1aXJlIiwiQUlIZWxwZXIiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsInN0YXJQcmVmYWIiLCJ0eXBlIiwiUHJlZmFiIiwiY2FyZFByZWZhYiIsIm1heFN0YXJEdXJhdGlvbiIsIm1pblN0YXJEdXJhdGlvbiIsImN1cnJlbnRDYXJkUG9zaXRpb24iLCJzdGFydENhcmRQb3N0aW9uIiwiY2FyZFdpZHRoIiwibG9naWNIZWxwZXIiLCJjYXJkQXJyYXkiLCJTdHJpbmciLCJwb2tlclBsYXllciIsInJvdW5kUG9rZXIiLCJwbGF5ZXJDb250cm9sTm9kZUFycmF5IiwicmVmcmVzaEJ1dHRvbiIsIkJ1dHRvbiIsInNlbmRCdXR0b24iLCJjdXJyZW50V2lubmVyIiwiZ2FtZUhvc3QiLCJsYXlvdXRDb250YWluZXIiLCJMYXlvdXQiLCJsYXlvdXRCb3R0b20iLCJsYXlvdXRUb3AiLCJsYXlvdXRMZWZ0IiwibGF5b3V0UmlnaHQiLCJsb2dMYWJlbCIsIkxhYmVsIiwicGxheUxvZyIsImdyb3VuZCIsIk5vZGUiLCJwbGF5ZXIiLCJzY29yZURpc3BsYXkiLCJzY29yZUF1ZGlvIiwiQXVkaW9DbGlwIiwib25Mb2FkIiwiZ3JvdW5kWSIsInkiLCJoZWlnaHQiLCJ0aW1lciIsInN0YXJEdXJhdGlvbiIsImkiLCJwcmUiLCJqIiwic3RyIiwicHVzaCIsIm5vZGUiLCJvbiIsInJlZnJlc2hDYWxsYmFjayIsInNlbmRDYWxsYmFjayIsInB1Ymxpc2hQb2tlcnMiLCJzY29yZSIsImJ1dHRvbiIsInNlbmRBcnJheSIsImRlc3RvcnlBcnJheSIsImxlbmd0aCIsImdldENvbXBvbmVudCIsImlzQ2hlY2siLCJwaWNOdW0iLCJzYXZlUm91bmRQb2tlciIsImRlc3Ryb3kiLCJzcGxpY2UiLCJjb25zb2xlIiwibG9nIiwic2Vjb25kQ2FyZEFycmF5Iiwic2VuZEFJRm9sbG93Q2FyZCIsInRocmlkQ2FyZEFycmF5IiwiYXBwZW5kTG9nIiwiaW5kZXgiLCJvZmZzZXQiLCJuZXdTdGFyIiwiaW5zdGFudGlhdGUiLCJzY2FsZVgiLCJzY2FsZVkiLCJhZGRDaGlsZCIsInJlbW92ZVBva2VyRnJvbUFycmF5Iiwic3Bhd25OZXdTdGFyIiwic2V0UG9zaXRpb24iLCJnZXROZXdTdGFyUG9zaXRpb24iLCJnYW1lIiwiTWF0aCIsInJhbmRvbSIsInNwYXduQm90dG9tQ2FyZCIsImRlc3RvcnlOb2RlIiwiY3JlYXRlQm90dG9tQ2FyZCIsInN0YXJ0UG9zaXRpb24iLCJ1c2VyT2JqIiwidG90YWwiLCJyYW5kWCIsInJhbmRZIiwianVtcEhlaWdodCIsIm1heFgiLCJ3aWR0aCIsInYyIiwiZ2V0Q2FyZEJvdHRvbVBvc2l0aW9uIiwidXBkYXRlIiwiZHQiLCJnYWluU2NvcmUiLCJzdHJpbmciLCJhdWRpb0VuZ2luZSIsInBsYXlFZmZlY3QiLCJnYW1lT3ZlciIsInN0b3BBbGxBY3Rpb25zIiwiZGlyZWN0b3IiLCJsb2FkU2NlbmUiLCJwb2tlckFycmF5Iiwic2xpY2UiLCJob3N0IiwicGFyc2VJbnQiLCJwbGF5ZXJQb2tlckFycmF5IiwicG9rZXJOdW0iLCJ2YWx1ZSIsInF1YXJ5UG9rZXJUeXBlVmFsdWUiLCJxdWFyeVBva2VyVmFsdWUiLCJleHBhbmRQbGF5ZXIiLCJwbGF5ZXJPYmoiLCJzb3J0UG9rZXJzIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvY2F0aW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLElBQUlBLFNBQVMsR0FBR0MsT0FBTyxDQUFDLFdBQUQsQ0FBdkI7O0FBQ0EsSUFBSUMsUUFBUSxHQUFHRCxPQUFPLENBQUMsVUFBRCxDQUF0Qjs7QUFDQUUsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1I7QUFDQUMsSUFBQUEsVUFBVSxFQUFFO0FBQ1IsaUJBQVMsSUFERDtB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QUFLdEUsT0FBTCxHQUFlLEtBQUtBLE9BQUwsR0FBZSxJQUFmLEdBQXNCc0UsTUFBckM7QUFDQSxTQUFLeEUsUUFBTCxDQUFjd0UsTUFBZCxHQUF1QixLQUFLdEUsT0FBNUI7QUFDSDtBQXBVSSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJcbmxldCBQb2tlclV0aWwgPSByZXF1aXJlKFwiUG9rZXJVdGlsXCIpO1xubGV0IEFJSGVscGVyID0gcmVxdWlyZShcIkFJSGVscGVyXCIpO1xuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgLy8g6L+Z5Liq5bGe5oCn5byV55So5LqG5pif5pif6aKE5Yi26LWE5rqQXG4gICAgICAgIHN0YXJQcmVmYWI6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5QcmVmYWJcbiAgICAgICAgfSxcbiAgICAgICAgY2FyZFByZWZhYjoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLlByZWZhYlxuICAgICAgICB9LFxuICAgICAgICAvLyDmmJ/mmJ/kuqfnlJ/lkI7mtojlpLHml7bpl7TnmoTpmo/mnLrojIPlm7RcbiAgICAgICAgbWF4U3RhckR1cmF0aW9uOiAwLFxuICAgICAgICBtaW5TdGFyRHVyYXRpb246IDAsXG4gICAgICAgIGN1cnJlbnRDYXJkUG9zaXRpb246IDAsXG4gICAgICAgIHN0YXJ0Q2FyZFBvc3Rpb246IDAsXG4gICAgICAgIGNhcmRXaWR0aDogODAsXG4gICAgICAgIGxvZ2ljSGVscGVyOiBudWxsLFxuICAgICAgICBjYXJkQXJyYXk6IFtjYy5TdHJpbmddLFxuICAgICAgICAvL+WIneWni+eJjOaVsOe7hCDpgIbml7bpkogg5Li76KeS5piv56ys5LiA5Liq5pWw57uEXG4gICAgICAgIHBva2VyUGxheWVyOiBbXSxcbiAgICAgICAgLy/lvZPliY3ova7mrKHlh7rniYzoioLngrksXG4gICAgICAgIHJvdW5kUG9rZXI6IFtdLFxuICAgICAgICAvL+S4u+inkuW9k+WJjeeJjOiKgueCuVxuICAgICAgICBwbGF5ZXJDb250cm9sTm9kZUFycmF5OiBbXSxcbiAgICAgICAgLy/mtJfniYxcbiAgICAgICAgcmVmcmVzaEJ1dHRvbjoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkJ1dHRvblxuICAgICAgICB9LFxuICAgICAgICAvL+WHuueJjFxuICAgICAgICBzZW5kQnV0dG9uOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuQnV0dG9uXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy/lvZPliY3og5zmlrlcbiAgICAgICAgY3VycmVudFdpbm5lcjogMSxcbiAgICAgICAgLy/mnKzova7kuLtcbiAgICAgICAgZ2FtZUhvc3Q6IFwiMVwiLFxuICAgICAgICAvL+eOqeWutuaLpeacieeJjFxuICAgICAgICBsYXlvdXRDb250YWluZXI6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5MYXlvdXRcbiAgICAgICAgfSxcbiAgICAgICAgLy/njqnlrrblh7rnmoTniYwgXG4gICAgICAgIGxheW91dEJvdHRvbToge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkxheW91dFxuICAgICAgICB9LFxuICAgICAgICAvL+WvueWutuWHuueJjCDnrKzkuInkvY1cbiAgICAgICAgbGF5b3V0VG9wOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTGF5b3V0XG4gICAgICAgIH0sXG4gICAgICAgIC8v5LiL5a625Ye654mMIOW3puaJi+esrOS6jOS9jVxuICAgICAgICBsYXlvdXRMZWZ0OiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTGF5b3V0XG4gICAgICAgIH0sXG4gICAgICAgIC8v5LiK5a625Ye654mM77yM5Y+z5omL56ys5Zub5L2NXG4gICAgICAgIGxheW91dFJpZ2h0OiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTGF5b3V0XG4gICAgICAgIH0sXG4gICAgICAgIC8v5oiY5oqlXG4gICAgICAgIGxvZ0xhYmVsOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWxcbiAgICAgICAgfSxcbiAgICAgICAgcGxheUxvZzogXCLmuLjmiI/lvIDlp4tcIixcbiAgICAgICAgLy8g5Zyw6Z2i6IqC54K577yM55So5LqO56Gu5a6a5pif5pif55Sf5oiQ55qE6auY5bqmXG4gICAgICAgIGdyb3VuZDoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcbiAgICAgICAgLy8gcGxheWVyIOiKgueCue+8jOeUqOS6juiOt+WPluS4u+inkuW8uei3s+eahOmrmOW6pu+8jOWSjOaOp+WItuS4u+inkuihjOWKqOW8gOWFs1xuICAgICAgICBwbGF5ZXI6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG4gICAgICAgIC8vIHNjb3JlIGxhYmVsIOeahOW8leeUqFxuICAgICAgICBzY29yZURpc3BsYXk6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbFxuICAgICAgICB9LFxuICAgICAgICAvLyDlvpfliIbpn7PmlYjotYTmupBcbiAgICAgICAgc2NvcmVBdWRpbzoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkF1ZGlvQ2xpcFxuICAgICAgICB9LFxuICAgIH0sXG5cbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8g6I635Y+W5Zyw5bmz6Z2i55qEIHkg6L205Z2Q5qCHXG4gICAgICAgIHRoaXMuZ3JvdW5kWSA9IHRoaXMuZ3JvdW5kLnkgKyB0aGlzLmdyb3VuZC5oZWlnaHQgLyAyO1xuICAgICAgICAvLyDliJ3lp4vljJborqHml7blmahcbiAgICAgICAgdGhpcy50aW1lciA9IDA7XG4gICAgICAgIHRoaXMuc3RhckR1cmF0aW9uID0gMDtcbiAgICAgICAgdGhpcy5sb2dpY0hlbHBlciA9IG5ldyBBSUhlbHBlcigpO1xuICAgICAgICAvL+WIm+W7uuWbvueJh+i1hOa6kFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEzOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBwcmUgPSAzICsgaTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgNTsgaisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKHByZSA8IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0ciA9IFwiMFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdHIgPSBzdHIgKyBwcmUgKyBqO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FyZEFycmF5LnB1c2goc3RyKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhcmRBcnJheS5wdXNoKHN0cik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYXJkQXJyYXkucHVzaChcIjE2MVwiKTtcbiAgICAgICAgdGhpcy5jYXJkQXJyYXkucHVzaChcIjE2MVwiKTtcbiAgICAgICAgdGhpcy5jYXJkQXJyYXkucHVzaChcIjE3MVwiKTtcbiAgICAgICAgdGhpcy5jYXJkQXJyYXkucHVzaChcIjE3MVwiKTtcblxuXG4gICAgICAgIHRoaXMucmVmcmVzaEJ1dHRvbi5ub2RlLm9uKCdjbGljaycsIHRoaXMucmVmcmVzaENhbGxiYWNrLCB0aGlzKTtcbiAgICAgICAgdGhpcy5zZW5kQnV0dG9uLm5vZGUub24oJ2NsaWNrJywgdGhpcy5zZW5kQ2FsbGJhY2ssIHRoaXMpO1xuICAgICAgICB0aGlzLnB1Ymxpc2hQb2tlcnMoKTtcbiAgICAgICAgLy8gdGhpcy5zcGF3bk5ld1N0YXIoKTtcbiAgICAgICAgLy8g5Yid5aeL5YyW6K6h5YiGXG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgIH0sXG4gICAgcmVmcmVzaENhbGxiYWNrOiBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgICAgIHRoaXMucHVibGlzaFBva2VycygpO1xuICAgIH0sXG4gICAgc2VuZENhbGxiYWNrOiBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgICAgIGxldCBzZW5kQXJyYXkgPSBbXTtcbiAgICAgICAgUG9rZXJVdGlsLmRlc3RvcnlBcnJheSh0aGlzLnJvdW5kUG9rZXIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGxheWVyQ29udHJvbE5vZGVBcnJheS5sZW5ndGg7KSB7XG4gICAgICAgICAgICAvL+WIpOaWreaYr+WQpuWPr+WHulxuICAgICAgICAgICAgbGV0IG5vZGUgPSB0aGlzLnBsYXllckNvbnRyb2xOb2RlQXJyYXlbaV0uZ2V0Q29tcG9uZW50KCdDYXJkJyk7XG4gICAgICAgICAgICBpZiAobm9kZS5pc0NoZWNrKSB7XG4gICAgICAgICAgICAgICAgc2VuZEFycmF5LnB1c2gobm9kZS5waWNOdW0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVJvdW5kUG9rZXIobm9kZS5waWNOdW0sIDEsIGkgKiB0aGlzLmNhcmRXaWR0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJDb250cm9sTm9kZUFycmF5W2ldLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllckNvbnRyb2xOb2RlQXJyYXkuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0aGlzLnBsYXllckNvbnRyb2xOb2RlQXJyYXlbaV0uZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKFwib25pb25cIiwgXCJoZWxwZXJcIiArIHRoaXMubG9naWNIZWxwZXIpO1xuICAgICAgICBsZXQgc2Vjb25kQ2FyZEFycmF5ID0gdGhpcy5sb2dpY0hlbHBlci5zZW5kQUlGb2xsb3dDYXJkKHRoaXMuZ2FtZUhvc3QsIDEsIHNlbmRBcnJheSwgdGhpcy5wb2tlclBsYXllclsxXSk7XG4gICAgICAgIC8vICBQb2tlclV0aWwudGVzdExvZ2ljKHRlc3RBcnJheSk7XG5cbiAgICAgICAgc2VuZEFycmF5LnB1c2goc2Vjb25kQ2FyZEFycmF5KTtcblxuICAgICAgICB0aGlzLnNhdmVSb3VuZFBva2VyKHNlY29uZENhcmRBcnJheSwgMiwgMCk7XG4gICAgICAgIGxldCB0aHJpZENhcmRBcnJheSA9IHRoaXMubG9naWNIZWxwZXIuc2VuZEFJRm9sbG93Q2FyZCh0aGlzLmdhbWVIb3N0LCAyLCBzZW5kQXJyYXksIHRoaXMucG9rZXJQbGF5ZXJbMl0pO1xuICAgICAgICBzZW5kQXJyYXkucHVzaCh0aHJpZENhcmRBcnJheSk7XG4gICAgICAgIHRoaXMuc2F2ZVJvdW5kUG9rZXIodGhyaWRDYXJkQXJyYXksIDMsIDApO1xuICAgICAgICB0aGlzLmFwcGVuZExvZyhcIuaIkeWHulwiICsgc2VuZEFycmF5ICsgXCLkuIvlrrblh7pcIiArIHNlY29uZENhcmRBcnJheSArIFwi5a+55a625Ye6XCIgKyB0aHJpZENhcmRBcnJheSk7XG4gICAgfSxcbiAgICAvL+S/neWtmOWHuueJjCAgMSAyIDMgNCDpobrml7bpkojkvY1cbiAgICBzYXZlUm91bmRQb2tlcjogZnVuY3Rpb24gKHBpY051bSwgaW5kZXgsIG9mZnNldCkge1xuICAgICAgICB2YXIgbmV3U3RhciA9IGNjLmluc3RhbnRpYXRlKHRoaXMuY2FyZFByZWZhYik7XG4gICAgICAgIC8vIG5ld1N0YXIuc2V0UGljTnVtKFwiaVwiK2kpO1xuICAgICAgICBuZXdTdGFyLmdldENvbXBvbmVudCgnQ2FyZCcpLnBpY051bSA9IHBpY051bTtcbiAgICAgICAgbmV3U3Rhci5zY2FsZVggPSAwLjU7XG4gICAgICAgIG5ld1N0YXIuc2NhbGVZID0gMC41O1xuICAgICAgICB0aGlzLnJvdW5kUG9rZXIucHVzaChuZXdTdGFyKTtcbiAgICAgICAgLy8gdGhpcy5ub2RlLmFkZENoaWxkKG5ld1N0YXIpO1xuICAgICAgICAvLyBsZXQgaGVpZ2h0ID0gdGhpcy5ncm91bmQuaGVpZ2h0IC8gMiAqIC0xO1xuICAgICAgICBzd2l0Y2ggKGluZGV4KSB7XG4gICAgICAgICAgICBjYXNlIDE6IHRoaXMubGF5b3V0Qm90dG9tLm5vZGUuYWRkQ2hpbGQobmV3U3Rhcik7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dpY0hlbHBlci5yZW1vdmVQb2tlckZyb21BcnJheSh0aGlzLmdhbWVIb3N0LCBwaWNOdW0sIHRoaXMucG9rZXJQbGF5ZXJbMF0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOiB0aGlzLmxheW91dExlZnQubm9kZS5hZGRDaGlsZChuZXdTdGFyKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2ljSGVscGVyLnJlbW92ZVBva2VyRnJvbUFycmF5KHRoaXMuZ2FtZUhvc3QsIHBpY051bSwgdGhpcy5wb2tlclBsYXllclsxXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6IHRoaXMubGF5b3V0VG9wLm5vZGUuYWRkQ2hpbGQobmV3U3Rhcik7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dpY0hlbHBlci5yZW1vdmVQb2tlckZyb21BcnJheSh0aGlzLmdhbWVIb3N0LCBwaWNOdW0sIHRoaXMucG9rZXJQbGF5ZXJbMl0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIG5ld1N0YXIuc2V0UG9zaXRpb24oY2MudjIoLTE1MCArIHRoaXMuc3RhcnRDYXJkUG9zdGlvbiArIG9mZnNldCwgaGVpZ2h0KSk7XG4gICAgfSxcbiAgICBzcGF3bk5ld1N0YXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8g5L2/55So57uZ5a6a55qE5qih5p2/5Zyo5Zy65pmv5Lit55Sf5oiQ5LiA5Liq5paw6IqC54K5XG4gICAgICAgIHZhciBuZXdTdGFyID0gY2MuaW5zdGFudGlhdGUodGhpcy5zdGFyUHJlZmFiKTtcbiAgICAgICAgLy8g5bCG5paw5aKe55qE6IqC54K55re75Yqg5YiwIENhbnZhcyDoioLngrnkuIvpnaJcbiAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKG5ld1N0YXIpO1xuICAgICAgICAvLyDkuLrmmJ/mmJ/orr7nva7kuIDkuKrpmo/mnLrkvY3nva5cbiAgICAgICAgbmV3U3Rhci5zZXRQb3NpdGlvbih0aGlzLmdldE5ld1N0YXJQb3NpdGlvbigpKTtcbiAgICAgICAgLy8g5Zyo5pif5pif57uE5Lu25LiK5pqC5a2YIEdhbWUg5a+56LGh55qE5byV55SoXG4gICAgICAgIG5ld1N0YXIuZ2V0Q29tcG9uZW50KCdTdGFyJykuZ2FtZSA9IHRoaXM7XG4gICAgICAgIC8vIOmHjee9ruiuoeaXtuWZqO+8jOagueaNrua2iOWkseaXtumXtOiMg+WbtOmaj+acuuWPluS4gOS4quWAvFxuICAgICAgICB0aGlzLnN0YXJEdXJhdGlvbiA9IHRoaXMubWluU3RhckR1cmF0aW9uICsgTWF0aC5yYW5kb20oKSAqICh0aGlzLm1heFN0YXJEdXJhdGlvbiAtIHRoaXMubWluU3RhckR1cmF0aW9uKTtcbiAgICAgICAgdGhpcy50aW1lciA9IDA7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDnp7vpmaTml6fnmoToioLngrlcbiAgICAgKiDmt7vliqDmlrDoioLngrlcbiAgICAgKi9cbiAgICBzcGF3bkJvdHRvbUNhcmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucGxheWVyQ29udHJvbE5vZGVBcnJheS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgZGVzdG9yeU5vZGUgPSB0aGlzLnBsYXllckNvbnRyb2xOb2RlQXJyYXk7XG4gICAgICAgICAgICBQb2tlclV0aWwuZGVzdG9yeUFycmF5KGRlc3RvcnlOb2RlKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyQ29udHJvbE5vZGVBcnJheSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jcmVhdGVCb3R0b21DYXJkKClcblxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB0eXBlMUFycmF5OnR5cGUxQXJyYXksXG4gICAgICAgICAgICB0eXBlMkFycmF5OnR5cGUyQXJyYXksXG4gICAgICAgICAgICB0eXBlM0FycmF5OnR5cGUzQXJyYXksXG4gICAgICAgICAgICB0eXBlNEFycmF5OnR5cGU0QXJyYXksXG4gICAgICAgICAgICBob3N0QXJyYXk6aG9zdEFycmF5LFxuICAgICAgICAgICAgdG90YWw6dG90YWxcbiAgICAgKi9cbiAgICBjcmVhdGVCb3R0b21DYXJkOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgbGV0IHN0YXJ0UG9zaXRpb24gPSAwO1xuICAgICAgICBsZXQgdXNlck9iaiA9IHRoaXMucG9rZXJQbGF5ZXJbMF07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXNlck9iai50b3RhbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8g5L2/55So57uZ5a6a55qE5qih5p2/5Zyo5Zy65pmv5Lit55Sf5oiQ5LiA5Liq5paw6IqC54K5XG4gICAgICAgICAgICB2YXIgbmV3U3RhciA9IGNjLmluc3RhbnRpYXRlKHRoaXMuY2FyZFByZWZhYik7XG4gICAgICAgICAgICAvLyBuZXdTdGFyLnNldFBpY051bShcImlcIitpKTtcbiAgICAgICAgICAgIG5ld1N0YXIuZ2V0Q29tcG9uZW50KCdDYXJkJykucGljTnVtID0gdXNlck9iai50b3RhbFtpXTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyQ29udHJvbE5vZGVBcnJheS5wdXNoKG5ld1N0YXIpO1xuICAgICAgICAgICAgLy8gdGhpcy5ub2RlLmFkZENoaWxkKG5ld1N0YXIpO1xuICAgICAgICAgICAgdGhpcy5sYXlvdXRDb250YWluZXIubm9kZS5hZGRDaGlsZChuZXdTdGFyKTtcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSB0aGlzLmdyb3VuZC5oZWlnaHQgLyAyICogLTE7XG4gICAgICAgICAgICBzdGFydFBvc2l0aW9uID0gaSAqIHRoaXMuY2FyZFdpZHRoO1xuICAgICAgICAgICAgaWYgKGkgPiAxMykge1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IGhlaWdodCAtIDE1MFxuICAgICAgICAgICAgICAgIHN0YXJ0UG9zaXRpb24gPSAoaSAtIDEzKSAqIHRoaXMuY2FyZFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbmV3U3Rhci5zZXRQb3NpdGlvbihjYy52MigtMjAwICsgdGhpcy5zdGFydENhcmRQb3N0aW9uICsgc3RhcnRQb3NpdGlvbiwgaGVpZ2h0KSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG5cbiAgICBnZXROZXdTdGFyUG9zaXRpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJhbmRYID0gMDtcbiAgICAgICAgLy8g5qC55o2u5Zyw5bmz6Z2i5L2N572u5ZKM5Li76KeS6Lez6LeD6auY5bqm77yM6ZqP5py65b6X5Yiw5LiA5Liq5pif5pif55qEIHkg5Z2Q5qCHXG4gICAgICAgIHZhciByYW5kWSA9IHRoaXMuZ3JvdW5kWSArIE1hdGgucmFuZG9tKCkgKiB0aGlzLnBsYXllci5nZXRDb21wb25lbnQoJ1BsYXllcicpLmp1bXBIZWlnaHQgKyA1MDtcbiAgICAgICAgLy8g5qC55o2u5bGP5bmV5a695bqm77yM6ZqP5py65b6X5Yiw5LiA5Liq5pif5pifIHgg5Z2Q5qCHXG4gICAgICAgIHZhciBtYXhYID0gdGhpcy5ub2RlLndpZHRoIC8gMjtcbiAgICAgICAgcmFuZFggPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAyICogbWF4WDtcbiAgICAgICAgLy8g6L+U5Zue5pif5pif5Z2Q5qCHXG4gICAgICAgIHJldHVybiBjYy52MihyYW5kWCwgcmFuZFkpO1xuICAgIH0sXG4gICAgZ2V0Q2FyZEJvdHRvbVBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByYW5kWCA9IHRoaXMuY3VycmVudENhcmRQb3NpdGlvbjtcbiAgICAgICAgdmFyIHJhbmRZID0gMDtcbiAgICAgICAgdGhpcy5jdXJyZW50Q2FyZFBvc2l0aW9uID0gdGhpcy5jdXJyZW50Q2FyZFBvc2l0aW9uICsgdGhpcy5jYXJkV2lkdGg7XG4gICAgICAgIHJldHVybiBjYy52MihyYW5kWCwgcmFuZFkpO1xuICAgIH0sXG5cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xuICAgICAgICAvLyDmr4/luKfmm7TmlrDorqHml7blmajvvIzotoXov4fpmZDluqbov5jmsqHmnInnlJ/miJDmlrDnmoTmmJ/mmJ9cbiAgICAgICAgLy8g5bCx5Lya6LCD55So5ri45oiP5aSx6LSl6YC76L6RXG4gICAgICAgIC8vIGlmICh0aGlzLnRpbWVyID4gdGhpcy5zdGFyRHVyYXRpb24pIHtcbiAgICAgICAgLy8gICAgIHRoaXMuZ2FtZU92ZXIoKTtcbiAgICAgICAgLy8gICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlOyAgIC8vIGRpc2FibGUgZ2FtZU92ZXIgbG9naWMgdG8gYXZvaWQgbG9hZCBzY2VuZSByZXBlYXRlZGx5XG4gICAgICAgIC8vICAgICByZXR1cm47XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gdGhpcy50aW1lciArPSBkdDtcbiAgICB9LFxuXG4gICAgZ2FpblNjb3JlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2NvcmUgKz0gMTtcbiAgICAgICAgLy8g5pu05pawIHNjb3JlRGlzcGxheSBMYWJlbCDnmoTmloflrZdcbiAgICAgICAgdGhpcy5zY29yZURpc3BsYXkuc3RyaW5nID0gJ1Njb3JlOiAnICsgdGhpcy5zY29yZTtcbiAgICAgICAgLy8g5pKt5pS+5b6X5YiG6Z+z5pWIXG4gICAgICAgIGNjLmF1ZGlvRW5naW5lLnBsYXlFZmZlY3QodGhpcy5zY29yZUF1ZGlvLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIGdhbWVPdmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGxheWVyLnN0b3BBbGxBY3Rpb25zKCk7IC8v5YGc5q2iIHBsYXllciDoioLngrnnmoTot7Pot4PliqjkvZxcbiAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdnYW1lJyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICog5oqK54mM5Y+R57uZ5Zub5a62XG4gICAgKi9cbiAgICBwdWJsaXNoUG9rZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucG9rZXJQbGF5ZXIgPSBbXTtcbiAgICAgICAgdGhpcy5nYW1lSG9zdCA9IG51bGw7XG4gICAgICAgIGxldCBwb2tlckFycmF5ID0gdGhpcy5jYXJkQXJyYXkuc2xpY2UoMCk7XG4gICAgICAgIGxldCBob3N0ID0gcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIDQpOy8v6ZqP5py65Li754mM6Iqx6ImyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcGxheWVyUG9rZXJBcnJheSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAyNzsgaisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBva2VyTnVtID0gTWF0aC5yYW5kb20oKSAqIHBva2VyQXJyYXkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHBva2VyTnVtID0gcGFyc2VJbnQocG9rZXJOdW0pO1xuICAgICAgICAgICAgICAgIC8v5o+S5YWl5omL54mM5LitXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gcG9rZXJBcnJheS5zcGxpY2UocG9rZXJOdW0sIDEpO1xuICAgICAgICAgICAgICAgIHBsYXllclBva2VyQXJyYXkucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZUhvc3QgPT0gbnVsbCkgey8v6ZqP5py65Yiw5Li75ZCO77yM56ys5LiA5byg5Li754mM5Lqu5Ye6XG4gICAgICAgICAgICAgICAgICAgIGlmIChob3N0ID09IFBva2VyVXRpbC5xdWFyeVBva2VyVHlwZVZhbHVlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lSG9zdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRMb2coXCLmnKzova7muLjmiI8s5Li754mMXCIgKyBQb2tlclV0aWwucXVhcnlQb2tlclZhbHVlKHZhbHVlKSArIFwi5ZyoXCIgKyB0aGlzLmV4cGFuZFBsYXllcihpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcGxheWVyT2JqID0gUG9rZXJVdGlsLnNvcnRQb2tlcnMoaG9zdCwgcGxheWVyUG9rZXJBcnJheSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9uaW9uPT09PVwiLCBKU09OLnN0cmluZ2lmeShwbGF5ZXJPYmopKTtcbiAgICAgICAgICAgIHRoaXMucG9rZXJQbGF5ZXIucHVzaChwbGF5ZXJPYmopO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3Bhd25Cb3R0b21DYXJkKCk7XG5cbiAgICB9LFxuICAgIGV4cGFuZFBsYXllcjogZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgIHN3aXRjaCAobG9jYXRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFwi6Ieq5bexXCJcbiAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFwi5LiL5a62XCJcbiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFwi5a+55a62XCJcbiAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFwi5LiK5a62XCJcbiAgICAgICAgfVxuXG4gICAgfSxcbiAgICBhcHBlbmRMb2c6IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5wbGF5TG9nID0gdGhpcy5wbGF5TG9nICsgXCJcXG5cIiArIHN0cmluZztcbiAgICAgICAgdGhpcy5sb2dMYWJlbC5zdHJpbmcgPSB0aGlzLnBsYXlMb2c7XG4gICAgfVxuXG5cblxuXG5cbn0pO1xuIl19